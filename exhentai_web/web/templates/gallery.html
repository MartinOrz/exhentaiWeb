<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ title }}</title>
<link rel="stylesheet" type="text/css" href="../../static/css/style.css" />
<script type="text/javascript" src="../../static/js/jquery-3.1.0.min.js"></script>
<script type="text/javascript" src="../../static/js/common.js"></script>
<script type="text/javascript">
    var gid = {{ id }}
    var length = {{ length }}
    var now = {{ first_page }}
    $(document).ready(function() {
        var csrftoken = getCookie('csrftoken');
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });
        $("img#i").bind("click", function(){
            if (now < length) {
                now += 1
                $("span#now").html(now)
                $(this).attr("src", "http://localhost:8080/gallery/" + gid + "/" + now);
            }
        });
        $("img#f").bind("click", function(){
            now = 1
            $("span#now").html(now)
            $("img#i").attr("src", "http://localhost:8080/gallery/" + gid + "/" + now);
        });
        $("img#p").bind("click", function(){
            if (now > 1) {
                now -= 1
                $("span#now").html(now)
                $("img#i").attr("src", "http://localhost:8080/gallery/" + gid + "/" + now);
            }
        });
        $("img#n").bind("click", function(){
            if (now < length) {
                now += 1
                $("span#now").html(now)
                $("img#i").attr("src", "http://localhost:8080/gallery/" + gid + "/" + now);
            }
        });
        $("img#l").bind("click", function(){
            now = length
            $("span#now").html(now)
            $("img#i").attr("src", "http://localhost:8080/gallery/" + gid + "/" + now);
        });
        $("button#delete").click(function(){
            $.ajax({
                url: "/gallery/" + gid,
                type: "DELETE",
                success: function(result) {
                    // Do something with the result
                }
            });
        });
    });
</script>
</head>
<body style="text-align:center">
<div id="main" style="width:100%;height:100%">
    <div id="info">
        <span>画集信息</span>
        <div id="info1">
            <table>
                <tbody>
                    <tr>
                        <td class="tdl">语言:</td>
                        <td class="tdr">{{ language }}</td>
                    </tr>
                    <tr>
                        <td class="tdl">长度:</td>
                        <td class="tdr">{{ length }} 页</td>
                    </tr>
                    <tr>
                        <td class="tdl">评分:</td>
                        <td class="tdr">{{ rating }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="image">
        <div id="header">
            <h1>{{ name_n }}</h1>
            <h1>{{ name_j }}</h1>
        </div>
        <div id="comic_img">
            <image id="i" src="{{ first_page_url }}"/>
        </div>
    </div>
    <div id="footer">
        <img id="f" src="../../static/resources/first_page.png" />
        <img id="p" src="../../static/resources/pre_page.png" />
        <div><span id="now">1</span> / <span>{{ length }}</span></div>
        <img id="n" src="../../static/resources/next_page.png" />
        <img id="l" src="../../static/resources/last_page.png" />
    </div>
</div>
</body>

</html>